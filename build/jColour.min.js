(function(){window.jColour=function(){function d(a){var b;if(b=a.match(/^#?([a-f0-9]{6,8})$/i))this.red=parseInt(b[1].substring(0,2),16),this.green=parseInt(b[1].substring(2,4),16),this.blue=parseInt(b[1].substring(4,6),16),this.alpha=b[1].substring(6,8)?parseInt(b[1].substring(6,8),16)/255:1,h(this);else if(b=a.match(/^rgba?\(\s*(\d+)[,\s]*(\d+)[,\s]*(\d+)[,\s]*([\.\d]+)?\s*\)$/i))this.red=b[1],this.green=b[2],this.blue=b[3],this.alpha=b[4]?b[4]:1,h(this);else if(a=a.match(/^hsla?\(\s*(\d+)[,\s]*(\d+)[,\s]*(\d+)[,\s]*([\.\d]+)?\s*\)$/i))this.hue=
a[1],this.saturation=a[2],this.lightness=a[3],this.alpha=a[4]?a[4]:1,e(this)}var i,e,l,j,h,m;d.prototype.hex=function(a){a==null&&(a=!1);return a&&this.alpha<1?"#"+i(this.red)+i(this.green)+i(this.blue)+i(this.alpha*255):"#"+i(this.red)+i(this.green)+i(this.blue)};d.prototype.rgb=function(){return this.alpha===1?"rgb("+Math.round(this.red)+", "+Math.round(this.green)+", "+Math.round(this.blue)+")":"rgba("+Math.round(this.red)+", "+Math.round(this.green)+", "+Math.round(this.blue)+", "+this.alpha.toPrecision(2)+
")"};d.prototype.hsl=function(){return this.alpha===1?"hsl("+Math.round(this.hue)+", "+Math.round(this.saturation)+", "+Math.round(this.lightness)+")":"hsla("+Math.round(this.hue)+", "+Math.round(this.saturation)+", "+Math.round(this.lightness)+", "+this.alpha.toPrecision(2)+")"};d.prototype.lighten=function(a){this.lightness+=a;return e(this)};d.prototype.lightenPercent=function(a){this.lightness+=this.lightness/100*a;return e(this)};d.prototype.darken=function(a){this.lightness-=a;return e(this)};
d.prototype.darkenPercent=function(a){this.lightness-=this.lightness/100*a;return e(this)};d.prototype.saturate=function(a){this.saturation+=a;return e(this)};d.prototype.saturatePercent=function(a){this.saturation+=this.saturation/100*a;return e(this)};d.prototype.desaturate=function(a){this.saturation-=a;return e(this)};d.prototype.desaturatePercent=function(a){this.saturation-=this.saturation/100*a;return e(this)};d.prototype.adjustHue=function(a){this.hue+=a;return e(this)};d.prototype.opacify=
function(a){this.alpha+=a;this.alpha=j(this.alpha,0,1);return this};d.prototype.transparentize=function(a){this.alpha-=a;this.alpha=j(this.alpha,0,1);return this};d.prototype.grayscale=function(){this.saturation=0;return e(this)};d.prototype.complement=function(){this.hue+=180;return e(this)};d.prototype.invert=function(){var a,b,c,g;g=["red","green","blue"];b=0;for(c=g.length;b<c;b++)a=g[b],this[a]=255-this[a];return h(this)};d.prototype.adjustColour=function(a){var b,c;a==null&&(a={});c=m(a);for(b in a)this[b]+=
a[b];return c[0]?h(this):e(this)};d.prototype.scaleColour=function(a){var b,c;a==null&&(a={});c=m(a);for(b in a)this[b]+=this[b]/100*a[b];return c[0]?h(this):e(this)};d.prototype.changeColour=function(a){var b,c;a==null&&(a={});c=m(a);for(b in a)this[b]=a[b];return c[0]?h(this):e(this)};d.prototype.mixWith=function(a,b){var c,g,f;b==null&&(b=50);a instanceof d||(a=new d(a));g=b/100;f=g*2-1;c=a.alpha-this.alpha;c=((f*c===-1?f:(f+c)/(1+f*c))+1)/2;f=1-c;this.red=a.red*c+this.red*f;this.green=a.green*
c+this.green*f;this.blue=a.blue*c+this.blue*f;this.alpha=a.alpha*g+this.alpha*(1-g);return h(this)};h=function(a){var b,c,g,f,d,e,k,h,i;a.red=j(a.red,0,255);a.green=j(a.green,0,255);a.blue=j(a.blue,0,255);a.alpha=j(a.alpha,0,1);h=a.red/255;g=a.green/255;b=a.blue/255;e=Math.max(h,g,b);k=Math.min(h,g,b);f=d=(e+k)/2;if(e===k)f=k=0;else{c=e-k;k=d>0.5?c/(2-e-k):c/(e+k);switch(e){case h:f=(g-b)/c+((i=g<b)!=null?i:{6:0});break;case g:f=(b-h)/c+2;break;case b:f=(h-g)/c+4}f/=6}a.hue=f*360;a.saturation=k*100;
a.lightness=d*100;return a};e=function(a){var b,c,d,f,e;a.hue>360&&(a.hue-=Math.floor(a.hue/360)*360);a.hue<0&&(a.hue-=Math.ceil(a.hue/360)*360);a.saturation=j(a.saturation,0,100);a.lightness=j(a.lightness,0,100);a.alpha=j(a.alpha,0,1);b=a.hue/360;f=a.saturation/100;c=a.lightness/100;f===0?e=c=b=c:(f=c<0.5?c*(1+f):c+f-c*f,d=2*c-f,e=l(d,f,b+1/3),c=l(d,f,b),b=l(d,f,b-1/3));a.red=e*255;a.green=c*255;a.blue=b*255;return a};l=function(a,b,c){c<0&&(c+=1);c>1&&(c-=1);if(c<1/6)return a+(b-a)*6*c;if(c<0.5)return b;
if(c<2/3)return a+(b-a)*(2/3-c)*6;return a};i=function(a){a==null&&(a="00");a=parseInt(a);if(a===0||isNaN(a))return"00";a=Math.round(j(a,0,255));return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16)};j=function(a,b,c){return Math.min(Math.max(a,b),c)};m=function(a){var b,c,d;d=b=!1;for(c in a){if(c==="red"||c==="green"||c==="blue")d=!0;if(c==="hue"||c==="saturation"||c==="luminosity")b=!0}if(d&&b)throw"Cannot change both RGB and HSL properties";return[d,b]};return d}()}).call(this);
