(function(){var o=Array.prototype.indexOf||function(d){for(var f=0,e=this.length;f<e;f++)if(this[f]===d)return f;return-1};window.jColour=function(){function d(a){var b;a==null&&(a="#ffffff");if(b=a.match(/^#?([a-f0-9]{6,8})$/i))this.red=parseInt(b[1].substring(0,2),16),this.green=parseInt(b[1].substring(2,4),16),this.blue=parseInt(b[1].substring(4,6),16),this.alpha=b[1].substring(6,8)?parseInt(b[1].substring(6,8),16)/255:1,g(this);else if(b=a.match(/^rgba?\(\s*(\d+)[,\s]*(\d+)[,\s]*(\d+)[,\s]*([\.\d]+)?\s*\)$/i))this.red=
parseInt(b[1]),this.green=parseInt(b[2]),this.blue=parseInt(b[3]),this.alpha=b[4]?b[4]:1,g(this);else if(a=a.match(/^hsla?\(\s*(\d+)[,\s]*(\d+)[,\s]*(\d+)[,\s]*([\.\d]+)?\s*\)$/i))this.hue=parseInt(a[1]),this.saturation=parseInt(a[2]),this.lightness=parseInt(a[3]),this.alpha=a[4]?a[4]:1,e(this);else throw"Invalid colour string.";}var f,e,k,i,n,g,l;d.prototype.hex=function(a){a==null&&(a=!1);return(a&&this.alpha<1?"#"+f(this.red)+f(this.green)+f(this.blue)+f(this.alpha*255):"#"+f(this.red)+f(this.green)+
f(this.blue)).toLowerCase()};d.prototype.rgb=function(){return this.alpha===1?"rgb("+Math.round(this.red)+", "+Math.round(this.green)+", "+Math.round(this.blue)+")":"rgba("+Math.round(this.red)+", "+Math.round(this.green)+", "+Math.round(this.blue)+", "+Math.round(this.alpha*100)/100+")"};d.prototype.hsl=function(){return this.alpha===1?"hsl("+Math.round(this.hue)+", "+Math.round(this.saturation)+", "+Math.round(this.lightness)+")":"hsla("+Math.round(this.hue)+", "+Math.round(this.saturation)+", "+
Math.round(this.lightness)+", "+Math.round(this.alpha*100)/100+")"};d.prototype.lighten=function(a){this.lightness+=a;return e(this)};d.prototype.lightenPercent=function(a){this.lightness+=this.lightness/100*a;return e(this)};d.prototype.darken=function(a){this.lightness-=a;return e(this)};d.prototype.darkenPercent=function(a){this.lightness-=this.lightness/100*a;return e(this)};d.prototype.saturate=function(a){this.saturation+=a;return e(this)};d.prototype.saturatePercent=function(a){this.saturation+=
this.saturation/100*a;return e(this)};d.prototype.desaturate=function(a){this.saturation-=a;return e(this)};d.prototype.desaturatePercent=function(a){this.saturation-=this.saturation/100*a;return e(this)};d.prototype.grayscale=function(){this.saturation=0;return e(this)};d.prototype.adjustHue=function(a){this.hue+=a;return e(this)};d.prototype.complement=function(){this.hue+=180;return e(this)};d.prototype.opacify=function(a){this.alpha+=a;this.alpha=i(this.alpha,0,1);return this};d.prototype.transparentize=
function(a){this.alpha-=a;this.alpha=i(this.alpha,0,1);return this};d.prototype.invert=function(){var a,b,c,d;d=["red","green","blue"];b=0;for(c=d.length;b<c;b++)a=d[b],this[a]=255-this[a];return g(this)};d.prototype.adjustColour=function(a){var b,c;a==null&&(a={});c=l(a);for(b in a)o.call(n,b)>=0&&(this[b]+=a[b]);return c[0]?g(this):e(this)};d.prototype.scaleColour=function(a){var b,c;a==null&&(a={});c=l(a);for(b in a)o.call(n,b)>=0&&b!=="hue"&&(this[b]+=this[b]/100*a[b]);return c[0]?g(this):e(this)};
d.prototype.changeColour=function(a){var b,c;a==null&&(a={});c=l(a);for(b in a)this[b]=a[b];return c[0]?g(this):e(this)};d.prototype.mixWith=function(a,b){var c,m,h;b==null&&(b=50);a instanceof d||(a=new d(a));m=b/100;h=m*2-1;c=a.alpha-this.alpha;c=((h*c===-1?h:(h+c)/(1+h*c))+1)/2;h=1-c;this.red=a.red*c+this.red*h;this.green=a.green*c+this.green*h;this.blue=a.blue*c+this.blue*h;this.alpha=a.alpha*m+this.alpha*(1-m);return g(this)};n=["red","green","blue","hue","saturation","lightness","alpha"];g=
function(a){var b,c,d,h,e,f,g,j;a.red=i(a.red,0,255);a.green=i(a.green,0,255);a.blue=i(a.blue,0,255);a.alpha=i(a.alpha,0,1);j=a.red/255;d=a.green/255;b=a.blue/255;f=Math.max(j,d,b);g=Math.min(j,d,b);c=f-g;h=function(){switch(f){case g:return 0;case j:return 60*(b-j)/c;case d:return 60*(b-j)/c+120;case b:return 60*(b-j)/c+240}}();e=(f+g)/2;a.hue=h%360;a.saturation=(f===g?0:e<0.5?c/(2*e):c/(2-2*e))*100;a.lightness=e*100;return a};e=function(a){var b,c,d,e,f;a.hue>=360&&(a.hue-=Math.floor(a.hue/360)*
360);a.hue<0&&(a.hue-=Math.ceil(a.hue/360)*360);a.saturation=i(a.saturation,0,100);a.lightness=i(a.lightness,0,100);a.alpha=i(a.alpha,0,1);b=a.hue/360;e=a.saturation/100;c=a.lightness/100;e=c<0.5?c*(e+1):c+e-c*e;d=c*2-e;f=k(d,e,b+1/3);c=k(d,e,b);b=k(d,e,b-1/3);a.red=f*255;a.green=c*255;a.blue=b*255;return a};k=function(a,b,c){c<0&&(c+=1);c>1&&(c-=1);if(c*6<1)return a+(b-a)*c*6;if(c*2<1)return b;if(c*3<2)return a+(b-a)*(2/3-c)*6;return a};f=function(a){a==null&&(a="00");a=parseInt(a);if(a===0||isNaN(a))return"00";
a=Math.round(i(a,0,255));return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16)};i=function(a,b,c){return Math.min(Math.max(a,b),c)};l=function(a){var b,c,d;d=b=!1;for(c in a){if(c==="red"||c==="green"||c==="blue")d=!0;if(c==="hue"||c==="saturation"||c==="luminosity")b=!0}if(d&&b)throw"Cannot change both RGB and HSL properties.";return[d,b]};return d}()}).call(this);
