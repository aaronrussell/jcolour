(function(){var g,f,k,i,h,l;window.jColour=function(){function a(a){var b;if(b=a.match(/^#?([a-f0-9]{6,8})$/i))this.red=parseInt(b[1].substring(0,2),16),this.green=parseInt(b[1].substring(2,4),16),this.blue=parseInt(b[1].substring(4,6),16),this.alpha=b[1].substring(6,8)?parseInt(b[1].substring(6,8),16)/255:1,h(this);else if(b=a.match(/^rgba?\(\s*(\d+)[,\s]*(\d+)[,\s]*(\d+)[,\s]*([\.\d]+)?\s*\)$/i))this.red=b[1],this.green=b[2],this.blue=b[3],this.alpha=b[4]?b[4]:1,h(this);else if(a=a.match(/^hsla?\(\s*(\d+)[,\s]*(\d+)[,\s]*(\d+)[,\s]*([\.\d]+)?\s*\)$/i))this.hue=
a[1],this.saturation=a[2],this.lightness=a[3],this.alpha=a[4]?a[4]:1,f(this)}a.prototype.hex=function(){return this.alpha===1?"#"+g(this.red)+g(this.green)+g(this.blue):"#"+g(this.red)+g(this.green)+g(this.blue)+g(this.alpha*255)};a.prototype.rgb=function(){return this.alpha===1?"rgb("+Math.round(this.red)+", "+Math.round(this.green)+", "+Math.round(this.blue)+")":"rgba("+Math.round(this.red)+", "+Math.round(this.green)+", "+Math.round(this.blue)+", "+this.alpha.toPrecision(2)+")"};a.prototype.hsl=
function(){return this.alpha===1?"hsl("+Math.round(this.hue)+", "+Math.round(this.saturation)+", "+Math.round(this.lightness)+")":"hsla("+Math.round(this.hue)+", "+Math.round(this.saturation)+", "+Math.round(this.lightness)+", "+this.alpha.toPrecision(2)+")"};a.prototype.lighten=function(a){this.lightness+=a;return f(this)};a.prototype.lighten_percent=function(a){this.lightness+=this.lightness/100*a;return f(this)};a.prototype.darken=function(a){this.lightness-=a;return f(this)};a.prototype.darken_percent=
function(a){this.lightness-=this.lightness/100*a;return f(this)};a.prototype.saturate=function(a){this.saturation+=a;return f(this)};a.prototype.saturate_percent=function(a){this.saturation+=this.saturation/100*a;return f(this)};a.prototype.desaturate=function(a){this.saturation-=a;return f(this)};a.prototype.desaturate_percent=function(a){this.saturation-=this.saturation/100*a;return f(this)};a.prototype.adjust_hue=function(a){this.hue+=a;return f(this)};a.prototype.opacify=function(a){this.alpha+=
a;this.alpha=i(this.alpha,0,1);return this};a.prototype.transparentize=function(a){this.alpha-=a;this.alpha=i(this.alpha,0,1);return this};a.prototype.grayscale=function(){this.saturation=0;return f(this)};a.prototype.complement=function(){this.hue+=180;return f(this)};a.prototype.mix_with=function(d,b){var c,e;b==null&&(b=50);d instanceof a||(d=new a(d));e=b/100*2-1;c=d.alpha-this.alpha;c=((e*c===-1?e:(e+c)/(1+e*c))+1)/2;e=1-c;c={red:d.red*c+this.red*e,green:d.green*c+this.green*e,blue:d.blue*c+
this.blue*e};return new a("rgba("+Math.round(c.red)+", "+Math.round(c.green)+", "+Math.round(c.blue)+")")};a.prototype.adjust_colour=function(a){var b,c;a==null&&(a={});c=l(a);for(b in a)this[b]+=a[b];return c[0]?h(this):f(this)};a.prototype.scale_colour=function(a){var b,c;a==null&&(a={});c=l(a);for(b in a)this[b]+=this[b]/100*a[b];return c[0]?h(this):f(this)};a.prototype.change_colour=function(a){var b,c;a==null&&(a={});c=l(a);for(b in a)this[b]=a[b];return c[0]?h(this):f(this)};return a}();h=function(a){var d,
b,c,e,f,g,j,h,k;a.red=i(a.red,0,255);a.green=i(a.green,0,255);a.blue=i(a.blue,0,255);a.alpha=i(a.alpha,0,1);h=a.red/255;c=a.green/255;d=a.blue/255;g=Math.max(h,c,d);j=Math.min(h,c,d);e=f=(g+j)/2;if(g===j)e=j=0;else{b=g-j;j=f>0.5?b/(2-g-j):b/(g+j);switch(g){case h:e=(c-d)/b+((k=c<d)!=null?k:{6:0});break;case c:e=(d-h)/b+2;break;case d:e=(h-c)/b+4}e/=6}a.hue=e*360;a.saturation=j*100;a.lightness=f*100;return a};f=function(a){var d,b,c,e,f;a.hue>360&&(a.hue-=Math.floor(a.hue/360)*360);a.hue<0&&(a.hue-=
Math.ceil(a.hue/360)*360);a.saturation=i(a.saturation,0,100);a.lightness=i(a.lightness,0,100);a.alpha=i(a.alpha,0,1);d=a.hue/360;e=a.saturation/100;b=a.lightness/100;e===0?f=b=d=b:(e=b<0.5?b*(1+e):b+e-b*e,c=2*b-e,f=k(c,e,d+1/3),b=k(c,e,d),d=k(c,e,d-1/3));a.red=f*255;a.green=b*255;a.blue=d*255;return a};k=function(a,d,b){b<0&&(b+=1);b>1&&(b-=1);if(b<1/6)return a+(d-a)*6*b;if(b<0.5)return d;if(b<2/3)return a+(d-a)*(2/3-b)*6;return a};g=function(a){a==null&&(a="00");a=parseInt(a);if(a===0||isNaN(a))return"00";
a=Math.max(0,a);a=Math.min(a,255);a=Math.round(a);return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16)};i=function(a,d,b){return Math.min(Math.max(a,d),b)};l=function(a){var d,b,c;c=d=!1;for(b in a){if(b==="red"||b==="green"||b==="blue")c=!0;if(b==="hue"||b==="saturation"||b==="luminosity")d=!0}if(c&&d)throw"Cannot change both RGB and HSL properties";return[c,d]}}).call(this);
